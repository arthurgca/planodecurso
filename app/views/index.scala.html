@()

@import helper._

@main("Plano de Curso") {

<nav class="navbar navbar-inverse" role="navigation">
  <div class="container-fluid">
    <div class="navbar-header">
      <a class="navbar-brand" href="#">Plano de Curso</a>
    </div>
    <ul class="nav navbar-nav">
      <li><a href="/resetar">Resetar</a></li>
    </ul>
  </div>
</nav>

<div class="container">
  <alert ng-repeat="alerta in alertas.mensagens"
         type="alerta.tipo"
         close="alertas.fecharAlerta($index)">
    <span ng-bind-html="alerta.mensagem"></span>
  </alert>
  <div class="periodo panel panel-default"
       ng-repeat="periodo in planoDeCurso.periodos">
    <div class="panel-heading dropdown">
      {{periodo.semestre}}º Período
      <span class="label label-default">{{periodo.creditos}} créditos</span>
      <button class="dropdown-toggle pull-right btn btn-default btn-xs">
        <span class="glyphicon glyphicon-cog"></span>
      </button>
      <ul class="dropdown-menu pull-right">
        <li>
          <a href="#" ng-click="alocar(periodo)">
            Alocar Disciplina...
          </a>
        </li>
      </ul>
    </div>
    <div class="panel-body">
      <div class="list-group" ui-sortable="sortableOptions" ng-model="periodo.alocacoes">
        <a href="#"
           class="disciplina list-group-item"
           ng-repeat="alocacao in periodo.alocacoes">
          <button ng-click="desalocar(periodo, alocacao.disciplina)"
                  class="btn-desalocar pull-right btn btn-default btn-xs">
            <span class="glyphicon glyphicon-trash"></span>
          </button>
          <h4>
            {{alocacao.disciplina.nome}}
            <span class="creditos badge">{{alocacao.disciplina.creditos}}</span>
          </h4>
          <small ng-if="alocacao.disciplina.requisitos"
                 ng-repeat="requisito in alocacao.disciplina.requisitos">
            <span class="label requisito"
                  ng-class="[estiloRequisito(periodo, requisito)]">
              {{requisito.nome}}
            </span>
          </small>
        </a>
      </div>
    </div>
  </div>
</div>

<script type="text/ng-template" id="ModalAlocarDisciplina.html">
  <div class="modal-header">
    <h3>Alocar Disciplina</h3>
  </div>
  <div class="modal-body">
    <form role="form">
      <div class="form-group">
        <label for="semestre">Semestre</label>
        <input class="form-control"
               type="text"
               name="semestre"
               value="{{periodo.semestre}}"
               disabled>
      </div>
      <div class="form-group">
        <label for="disciplina">Disciplina</label>
        <select class="form-control"
                ng-model="disciplinaSelecionada"
                ng-options="d.nome for d in disciplinas">
        </select>
      </div>

      <div class="form-group" ng-if="disciplinaSelecionada.requisitos.length != 0">
        <h4>Requisitos</h4>
        <small ng-if="disciplinaSelecionada.requisitos"
               ng-repeat="requisitos in disciplinaSelecionada.requisitos">
          <span class="label label-danger">{{requisitos.nome}}</span>
        </small>
      </div>
    </form>
  </div>
  <div class="modal-footer">
    <button class="btn btn-primary" ng-click="ok(disciplinaSelecionada)">OK</button>
    <button class="btn btn-warning" ng-click="cancelar()">Cancelar</button>
  </div>
</script>

}
