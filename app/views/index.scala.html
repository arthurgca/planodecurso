@(planoForm: Form[PlanoDeCurso], disciplinasOfertadas: List[Disciplina])

@import helper._

@disciplinaField(field: Field) = {
  <div class="row disciplina @field.value">
    <a href="#" class="close remove" aria-hidden="true">&times;</a>
    <div class="nome">@field("nome").value</div>
    <div class="descricao">@field("creditos").value créditos</div>
    <input type="hidden" name="@field.name" value="@field.value">
  </div>
}

@periodoGroup(field: Field) = {
  <div id="periodo-@{field("semestre").value}" class="col-md-2 periodo">
    <div class="row sumario">
      <h4>@{field("semestre").value}º Período<br/>
        <small>@field("totalCreditos").value créditos</small></h4>
    </div>

    <input type="hidden" name="@field("semestre").name" value="@field("semestre").value">

    <div class="sortable-list">
      @repeat(field("disciplinas"), min=0) { disciplina =>
        @disciplinaField(disciplina)
      }
    </div>

    <div class="row sumario">
      <h4>@{field("semestre").value}º Período<br/>
        <small>@field("totalCreditos").value créditos</small></h4>
    </div>
  </div>
}

@main("Plano de Curso") {
<div class="container">
  <h2 class="nome-principal">Meu Curso</h2>

  @helper.form(action = routes.Application.submit, 'id -> "form") {
  <div id="disciplinas-alocadas">
    <div class="row">
      @repeat(planoForm("periodos"), min=1) { periodo =>
        @periodoGroup(periodo)
      }
    </div>
  </div>
  }

  <h2 class="nome-principal">Disciplinas Ofertadas</h2>

  <div id="disciplinas-ofertadas">
    @for(disciplinasRow <- disciplinasOfertadas.grouped(6)) {
    <div class="row">
      @for(disciplina <- disciplinasRow) {
      <div class="col-md-2">
        <div class="row disciplina @disciplina.getId()">
          <div class="nome">@disciplina.getNome()</div>
          <div class="descricao">@disciplina.getCreditos() Créditos</div>
          <input type="hidden" name="periodos[x].disciplinas[x]" value="@disciplina.getId()">
        </div>
      </div>
      }
    </div>
    }
  </div>
</div>
}
